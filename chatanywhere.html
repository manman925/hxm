<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>21&nbsp; ChatAnyWhere 服务 – 数据驱动的可重复性研究</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./deepseek.html" rel="next">
<link href="./huggingface.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M8996LBB6D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M8996LBB6D');
</script>


<link rel="stylesheet" href="custom.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./how-to-get-api-key.html">大模型API调用</a></li><li class="breadcrumb-item"><a href="./chatanywhere.html"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">ChatAnyWhere 服务</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">数据驱动的可重复性研究</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">前言</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">课程简介</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./what-is-reproducible-study.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">什么是可重复性研究</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">课程项目简介</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">环境搭建</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reproducible-data-analysis-environment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">可重复性数据分析环境</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup-a-reproducible-environment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">环境配置</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">基础知识</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./literate-programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">文学化编程</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">命令行程序</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">R 语言入门</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Python 语言入门</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python-vs-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Python 还是 R？</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./git-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Git 与 GitHub 入门</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">分组数据分析</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grouped-data-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">分组数据分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grouped-data-analysis-in-action.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">分组数据分析实战</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./score-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">测试成绩分析</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">转录组数据分析</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./transcriptomics-data-analysis-and-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">转录组学数据分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./transcriptomics-data-analysis-in-action.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">转录组数据分析实战</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">微生物组数据分析</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./microbiome-data-analysis-and-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">微生物组数据分析及可视化</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">大模型API调用</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how-to-get-api-key.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">获取 API KEY</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reading-paper.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">AI 批量读文献</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bailian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">阿里云百炼</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./huggingface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Hugging Face</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chatanywhere.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">ChatAnyWhere 服务</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deepseek.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">DeepSeek R1 模型</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">从零开始神经网络</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./neural-network-from-scratch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">手搓神经网络模型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./two-dimensional-classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">二维平面拟合</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">机器学习</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machine-learning-algorithms-and-implementation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">机器学习算法及实现</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">拉曼光谱识别病原菌</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pathogen-identification-with-raman-spectroscopy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">利用拉曼光谱识别病原菌</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bacteria-id-annotation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">开源代码释读</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pretrained-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">使用模型进行病原菌检测</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true">
 <span class="menu-text">计算机视觉分析实验图片</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./computer-vision-image-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">计算机视觉分析实验图片</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./segveg-data-preparation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">数据预处理</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./segveg-model-training.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">训练 SegVeg 模型</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">开发协作</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./collaboration-with-global-developers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">与全世界开发者协作</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-package-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">开发 R 包</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true">
 <span class="menu-text">问题解答</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FAQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">FAQ</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Markdown 速查表</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./write-math-equation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">书写数学公式</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto-cheatsheet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Quarto 速查表</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot2-cheatsheet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">ggplot2 速查表</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr-cheatsheet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">dplyr 速查表</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#模型列表" id="toc-模型列表" class="nav-link active" data-scroll-target="#模型列表"><span class="header-section-number">21.1</span> 模型列表</a></li>
  <li><a href="#对话模型" id="toc-对话模型" class="nav-link" data-scroll-target="#对话模型"><span class="header-section-number">21.2</span> 对话模型</a></li>
  <li><a href="#使用-openai-api" id="toc-使用-openai-api" class="nav-link" data-scroll-target="#使用-openai-api"><span class="header-section-number">21.3</span> 使用 OpenAI API</a></li>
  <li><a href="#词嵌入模型" id="toc-词嵌入模型" class="nav-link" data-scroll-target="#词嵌入模型"><span class="header-section-number">21.4</span> 词嵌入模型</a></li>
  <li><a href="#文生图模型" id="toc-文生图模型" class="nav-link" data-scroll-target="#文生图模型"><span class="header-section-number">21.5</span> 文生图模型</a></li>
  <li><a href="#识图功能不支持" id="toc-识图功能不支持" class="nav-link" data-scroll-target="#识图功能不支持"><span class="header-section-number">21.6</span> 识图功能（不支持）</a></li>
  <li><a href="#文字转语音模型" id="toc-文字转语音模型" class="nav-link" data-scroll-target="#文字转语音模型"><span class="header-section-number">21.7</span> 文字转语音模型</a></li>
  <li><a href="#语音识别模型" id="toc-语音识别模型" class="nav-link" data-scroll-target="#语音识别模型"><span class="header-section-number">21.8</span> 语音识别模型</a></li>
  <li><a href="#claude-模型" id="toc-claude-模型" class="nav-link" data-scroll-target="#claude-模型"><span class="header-section-number">21.9</span> Claude 模型</a></li>
  <li><a href="#语音翻译模型" id="toc-语音翻译模型" class="nav-link" data-scroll-target="#语音翻译模型"><span class="header-section-number">21.10</span> 语音翻译模型</a></li>
  <li><a href="#总结" id="toc-总结" class="nav-link" data-scroll-target="#总结"><span class="header-section-number">21.11</span> 总结</a></li>
  <li><a href="#参考文献" id="toc-参考文献" class="nav-link" data-scroll-target="#参考文献"><span class="header-section-number">21.12</span> 参考文献</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study/edit/main/chatanywhere.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study/blob/main/chatanywhere.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study/issues/" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./how-to-get-api-key.html">大模型API调用</a></li><li class="breadcrumb-item"><a href="./chatanywhere.html"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">ChatAnyWhere 服务</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">ChatAnyWhere 服务</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>ChatAnyWhere 主要提供 OpenAI、Claude、Gemini 等国外闭源大模型接入服务。</p>
<p>基本信息如下：</p>
<ul>
<li>服务器地址：<a href="https://api.chatanywhere.tech" class="uri">https://api.chatanywhere.tech</a></li>
<li>API KEY 购买与续费：<a href="https://peiqishop.me" class="uri">https://peiqishop.me</a></li>
<li>API KEY 余量查询：<a href="https://api.chatanywhere.org" class="uri">https://api.chatanywhere.org</a></li>
</ul>
<section id="模型列表" class="level2" data-number="21.1">
<h2 data-number="21.1" class="anchored" data-anchor-id="模型列表"><span class="header-section-number">21.1</span> 模型列表</h2>
<p>ChatAnyWhere 提供的模型名字可能会与 OpenAI 不同。例如 <code>*-ca</code> 模型会有更优惠的价格。为了配置调用参数时写对模型名称，需要查询提供的模型列表。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 读取 CHATANYWHERE_API_KEY 环境变量</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>OPENAI_API_KEY <span class="ot">=</span> <span class="fu">Sys.getenv</span>(<span class="st">"CHATANYWHERE_API_KEY"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>headers <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>   <span class="st">'Authorization'</span> <span class="ot">=</span> <span class="fu">glue</span>(<span class="st">'Bearer {OPENAI_API_KEY}'</span>),</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>   <span class="st">'User-Agent'</span> <span class="ot">=</span> <span class="st">'Apifox/1.0.0 (https://apifox.com)'</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>   <span class="st">'Content-Type'</span> <span class="ot">=</span> <span class="st">'application/json'</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 GET 方法获取</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">VERB</span>(<span class="st">"GET"</span>, </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/models"</span>, </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>将 JSON 输出为表格。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>models <span class="ot">=</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">content</span>(res, <span class="at">as =</span> <span class="st">"text"</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>))<span class="sc">$</span>data</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>models <span class="sc">|&gt;</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(owned_by), id) <span class="sc">|&gt;</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">created =</span> <span class="fu">as_datetime</span>(created) <span class="sc">|&gt;</span> <span class="fu">as_date</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: left;">object</th>
<th style="text-align: left;">created</th>
<th style="text-align: left;">owned_by</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">chatgpt-4o-latest</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">chatgpt-4o-latest-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dall-e-2</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-11-01</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">dall-e-3</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-10-31</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-3.5-turbo-0125</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-3.5-turbo-1106</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-11-02</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-3.5-turbo-instruct</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-08-24</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-3.5-turbo-instruct-0914</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-09-07</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4-0125-preview</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4-1106-preview</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-11-02</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4-turbo</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-04-05</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4-turbo-2024-04-09</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-04-08</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4-turbo-preview</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4o</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4o-2024-05-13</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4o-2024-08-06</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4o-2024-11-20</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4o-audio-preview</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4o-audio-preview-2024-10-01</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4o-mini</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4o-mini-2024-07-18</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4o-mini-2024-07-18-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4o-mini-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-05-10</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">text-embedding-3-large</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-22</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">text-embedding-3-small</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-22</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">tts-1-1106</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-11-03</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tts-1-hd</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-11-03</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="even">
<td style="text-align: left;">tts-1-hd-1106</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-11-03</td>
<td style="text-align: left;">system</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-3.5-turbo-16k</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-05-10</td>
<td style="text-align: left;">openai-internal</td>
</tr>
<tr class="even">
<td style="text-align: left;">text-embedding-ada-002</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2022-12-16</td>
<td style="text-align: left;">openai-internal</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tts-1</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-04-19</td>
<td style="text-align: left;">openai-internal</td>
</tr>
<tr class="even">
<td style="text-align: left;">whisper-1</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-02-27</td>
<td style="text-align: left;">openai-internal</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-3.5-turbo</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-02-28</td>
<td style="text-align: left;">openai</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-3.5-turbo-16k-0613</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-05-30</td>
<td style="text-align: left;">openai</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">openai</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4-0613</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-06-12</td>
<td style="text-align: left;">openai</td>
</tr>
<tr class="odd">
<td style="text-align: left;">claude-3-5-haiku-20241022</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">claude-3-5-sonnet-20240620</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">claude-3-5-sonnet-20241022</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">deepseek-reasoner</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gemini-1.5-flash-latest</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">gemini-1.5-pro-latest</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gemini-2.0-flash</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">gemini-2.0-flash-exp</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gemini-2.0-flash-thinking-exp</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">gemini-2.0-pro-exp-02-05</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gemini-exp-1206</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-3.5-turbo-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2023-03-12</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4-turbo-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gpt-4-turbo-preview-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">gpt-4o-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">o1</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">o1-2024-12-17</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">o1-mini</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">o1-mini-2024-09-12</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">o1-mini-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">o1-preview</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">o1-preview-2024-09-12</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">o1-preview-ca</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="odd">
<td style="text-align: left;">o3-mini</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
<tr class="even">
<td style="text-align: left;">o3-mini</td>
<td style="text-align: left;">model</td>
<td style="text-align: left;">2024-01-23</td>
<td style="text-align: left;">ca</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>下面依次介绍这些模型的用法。</p>
</section>
<section id="对话模型" class="level2" data-number="21.2">
<h2 data-number="21.2" class="anchored" data-anchor-id="对话模型"><span class="header-section-number">21.2</span> 对话模型</h2>
<p>以 <code>gpt-*</code> 开头的都是文本对话模型。调用 OpenAI 的模型时，通常需要配置以下一些关键参数来控制模型的行为和生成结果的方式。</p>
<ol type="1">
<li><strong>Prompt（提示）</strong>
<ul>
<li>模型的输入文本，通常称为“提示”。</li>
<li>可以是简单的文本，或者带有一些问题或任务描述，告诉模型生成哪类内容。</li>
</ul></li>
<li><strong>Max Tokens（最大令牌数）</strong>
<ul>
<li>指定生成的文本中最多包含多少个令牌（tokens）。一个令牌大约对应一个英文单词或标点符号。</li>
<li>该参数可以控制生成的响应长度，但包括输入和输出在内的令牌总数不能超过模型的上下文长度限制。</li>
</ul></li>
<li><strong>Temperature（温度）</strong>
<ul>
<li>控制生成文本的随机性。范围是 <code>0</code> 到 <code>2</code>：
<ul>
<li><code>temperature=0</code> 时，输出更加确定和保守，偏向生成常见的或“最可能”的答案。</li>
<li>较高的 <code>temperature</code> 值（如 <code>0.7</code>）会让生成的内容更加随机和多样化。</li>
</ul></li>
</ul></li>
<li><strong>n（生成次数）</strong>
<ul>
<li>控制生成多少个不同的响应。</li>
<li><code>n=1</code> 只生成一个响应；<code>n=2</code> 会生成多个响应，适合比较或选择最合适的内容。</li>
</ul></li>
</ol>
<p>调用 OpenAI 模型时，通常需要设置 <strong>模型名称、提示、最大令牌数、温度、top-p、生成次数</strong> 等参数，视任务需求还可以调整 <strong>出现惩罚、频率惩罚、停止序列</strong> 等其他配置，以控制生成的内容质量和行为。</p>
<p>下面这个例子，展示了 ChatGPT 数不清楚“temperature”这个单词里面有几个字母“e”。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="st">'{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="st">   "model": "gpt-4o-mini",</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="st">   "messages": [</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="st">      {</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="st">         "role": "system",</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="st">         "content": "You are a helpful assistant."</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="st">      },</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="st">      {</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="st">         "role": "user",</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="st">         "content": "Temperature这个单词中含有几个字母e？"</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="st">      }</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="st">   ],</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="st">   "temperature": 2</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span>;</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/chat/completions"</span>, </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">body =</span> body, </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers))</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(res, <span class="st">'text'</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>() <span class="sc">|&gt;</span> </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 7
 $ id                : chr "chatcmpl-B2EwCpPaf2ogu7rCBvY18JrNcfXrT"
 $ choices           :'data.frame': 1 obs. of  4 variables:
  ..$ index        : int 0
  ..$ message      :'data.frame':   1 obs. of  2 variables:
  .. ..$ role   : chr "assistant"
  .. ..$ content: chr "单词 \"temperature\" 中含有三个字母 \"e\"。"
  ..$ logprobs     : logi NA
  ..$ finish_reason: chr "stop"
 $ created           : int 1739873776
 $ model             : chr "gpt-4o-mini-2024-07-18"
 $ object            : chr "chat.completion"
 $ usage             :List of 5
  ..$ prompt_tokens            : int 29
  ..$ completion_tokens        : int 15
  ..$ total_tokens             : int 44
  ..$ completion_tokens_details:List of 2
  .. ..$ audio_tokens    : int 0
  .. ..$ reasoning_tokens: int 0
  ..$ prompt_tokens_details    :List of 2
  .. ..$ audio_tokens : int 0
  .. ..$ cached_tokens: int 0
 $ system_fingerprint: chr "fp_b045b4af17"</code></pre>
</div>
</div>
</section>
<section id="使用-openai-api" class="level2" data-number="21.3">
<h2 data-number="21.3" class="anchored" data-anchor-id="使用-openai-api"><span class="header-section-number">21.3</span> 使用 OpenAI API</h2>
<p>OpenAI 的原生 API 使用 Python 语言，以下是使用 Python 的示例代码。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> Markdown</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建 client</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    api_key<span class="op">=</span>os.getenv(<span class="st">"CHATANYWHERE_API_KEY"</span>), <span class="co"># 如果您没有配置环境变量，请在此处用您的API Key进行替换</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    base_url<span class="op">=</span><span class="st">"https://api.chatanywhere.tech"</span>,  <span class="co"># 填写 openAI 服务的 base_url</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成对话</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>completion <span class="op">=</span> client.chat.completions.create(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span><span class="st">"gpt-4o-ca"</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    messages<span class="op">=</span>[</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        {<span class="st">'role'</span>: <span class="st">'system'</span>, <span class="st">'content'</span>: <span class="st">'You are a helpful assistant.'</span>},</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        {<span class="st">'role'</span>: <span class="st">'user'</span>, <span class="st">'content'</span>: <span class="st">'你是谁'</span>}],</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    temperature<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    top_p<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>Markdown(completion.choices[<span class="dv">0</span>].message.content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p>我是一个人工智能助手，旨在为你提供帮助、回答问题、解决问题或陪你聊天！你可以叫我助手，或者随便给我取个名字哦～有什么我可以帮你的吗？</p>
</div>
</div>
<p>在 R 中，<code>ellmer</code> 包主要用于构建和管理 LLM 交互，你可以使用 <code>ellmer</code> 达到类似的效果。以下是等效的 R 代码：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ellmer)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建客户端</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>client <span class="ot">&lt;-</span> <span class="fu">chat_openai</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">api_key =</span> <span class="fu">Sys.getenv</span>(<span class="st">"CHATANYWHERE_API_KEY"</span>), <span class="co"># 也可以直接填入 API Key</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_prompt =</span> <span class="st">"You are a helpful assistant."</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">base_url =</span> <span class="st">"https://api.chatanywhere.tech"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> <span class="st">"gpt-4o-ca"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成对话</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>client<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"你是谁"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>我是一个人工智能助手，可以用来回答问题、提供建议并协助你处理各种任务。有任何需要帮助的地方，请随时告诉我！😊</code></pre>
</div>
</div>
<p>这段代码使用 <code>ellmer</code> 包的 <code>OpenAIClient</code> 进行 API 调用，<code>chat_completions_create()</code> 生成对话，与 Python 代码的逻辑基本一致。</p>
</section>
<section id="词嵌入模型" class="level2" data-number="21.4">
<h2 data-number="21.4" class="anchored" data-anchor-id="词嵌入模型"><span class="header-section-number">21.4</span> 词嵌入模型</h2>
<p>所有三个词嵌入模型都是基于 Transformer 架构，这使得它们在处理自然语言时具有良好的性能。下表比较了 <code>text-embedding-ada-002</code>、<code>text-embedding-3-small</code> 和 <code>text-embedding-3-large</code> 这三个词嵌入模型的特点：</p>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th><strong>模型名称</strong></th>
<th><strong>参数量</strong></th>
<th><strong>嵌入维度</strong></th>
<th><strong>性能</strong></th>
<th><strong>适用场景</strong></th>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>text-embedding-ada-002</code></td>
<td>中等</td>
<td>1536</td>
<td>高效，性能优秀</td>
<td>通用文本嵌入，适用于广泛的 NLP 任务</td>
<td>高精度嵌入，适合各种语义匹配任务</td>
<td>相比小型模型，计算资源需求较高</td>
</tr>
<tr class="even">
<td><code>text-embedding-3-small</code></td>
<td>小</td>
<td>512</td>
<td>较快，资源效率高</td>
<td>资源受限的应用场景，低计算成本的嵌入生成</td>
<td>计算效率高，适合实时或资源有限的场景</td>
<td>嵌入维度较低，可能影响语义表达能力</td>
</tr>
<tr class="odd">
<td><code>text-embedding-3-large</code></td>
<td>大</td>
<td>2048</td>
<td>更高性能，精度极高</td>
<td>高端应用场景，如高精度语义搜索和推荐系统</td>
<td>嵌入维度更高，能够捕捉复杂语义关系</td>
<td>资源消耗大，适合计算资源充足的场景</td>
</tr>
</tbody>
</table>
<p>用 R 语言调用词嵌入模型。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="st">'{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="st">   "model": "text-embedding-ada-002",</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="st">   "input": "The food was delicious and the waiter..."</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span>;</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/embeddings"</span>, </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">body =</span> body, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">add_headers</span>(headers))</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>content <span class="ot">=</span> <span class="fu">content</span>(res, <span class="st">'text'</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>embedding <span class="ot">=</span> <span class="fu">fromJSON</span>(content)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(embedding)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 4
 $ object: chr "list"
 $ data  :'data.frame': 1 obs. of  3 variables:
  ..$ object   : chr "embedding"
  ..$ embedding:List of 1
  .. ..$ : num [1:1536] 0.00231 -0.00933 0.0158 -0.00778 -0.00469 ...
  ..$ index    : int 0
 $ model : chr "ada"
 $ usage :List of 2
  ..$ prompt_tokens: int 8
  ..$ total_tokens : int 8</code></pre>
</div>
</div>
<p>等效的 Python 代码如下：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># API 端点和密钥</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://api.chatanywhere.tech/v1/embeddings"</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Authorization"</span>: <span class="ss">f"Bearer </span><span class="sc">{</span>os<span class="sc">.</span>getenv(<span class="st">'CHATANYWHERE_API_KEY'</span>)<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Content-Type"</span>: <span class="st">"application/json"</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 请求体</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"model"</span>: <span class="st">"text-embedding-ada-002"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"input"</span>: <span class="st">"The food was delicious and the waiter..."</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 发送请求</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.post(url, headers<span class="op">=</span>headers, json<span class="op">=</span>data)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 解析响应</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>embedding <span class="op">=</span> response.json()</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(embedding[<span class="st">"data"</span>][<span class="dv">0</span>][<span class="st">"embedding"</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1536</code></pre>
</div>
</div>
<p>这个 Python 版本使用 <code>requests</code> 发送 <code>POST</code> 请求，并解析返回的 JSON，效果和你的 R 代码相同。</p>
<p>可以使用 openai 模块，代码会更简洁：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI(api_key<span class="op">=</span>os.getenv(<span class="st">"CHATANYWHERE_API_KEY"</span>), base_url<span class="op">=</span><span class="st">"https://api.chatanywhere.tech"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> client.embeddings.create(model<span class="op">=</span><span class="st">"text-embedding-ada-002"</span>, <span class="bu">input</span><span class="op">=</span><span class="st">"The food was delicious and the waiter..."</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>pprint(response.<span class="bu">dict</span>(), depth<span class="op">=</span><span class="dv">3</span>)  <span class="co"># 以字典格式输出</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'data': [{'embedding': [...], 'index': 0, 'object': 'embedding'}],
 'model': 'ada',
 'object': 'list',
 'usage': {'prompt_tokens': 8, 'total_tokens': 8}}</code></pre>
</div>
</div>
</section>
<section id="文生图模型" class="level2" data-number="21.5">
<h2 data-number="21.5" class="anchored" data-anchor-id="文生图模型"><span class="header-section-number">21.5</span> 文生图模型</h2>
<p><code>dall-e-2</code> 和 <code>dall-e-3</code> 是文生图模型。</p>
<p>DALL-E 2 支持以下三种图像尺寸：</p>
<ol type="1">
<li><strong>256x256</strong></li>
<li><strong>512x512</strong></li>
<li><strong>1024x1024</strong></li>
</ol>
<p>DALL-E 3 支持以下图像尺寸：</p>
<ol type="1">
<li><strong>1024x1024</strong>: 正方形图像，适合大多数使用场景，是默认推荐的尺寸。</li>
<li><strong>1792x1024</strong>: 宽屏图像，适合需要更宽视野的场景或横向布局的设计。</li>
<li><strong>1024x1792</strong>: 纵向图像，适合需要更高视野的场景或纵向布局的设计。</li>
</ol>
<p>你可以根据具体需求选择合适的图像尺寸进行生成。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">"https://api.chatanywhere.tech/v1/images/generations"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="st">'{</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="st">   "prompt": "A colorful sunset over the snow mountains",</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="st">   "n": 1,</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="st">   "model":  "dall-e-3",</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="st">   "size": "1792x1024"</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span>;</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>response <span class="ot">=</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, url, <span class="at">body =</span> body, <span class="fu">add_headers</span>(headers))</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>content <span class="ot">=</span> <span class="fu">content</span>(response, <span class="st">"text"</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>content <span class="sc">|&gt;</span> <span class="fu">fromJSON</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$created
[1] 1739873805

$data
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       url
1 https://oaidalleapiprodscus.blob.core.windows.net/private/org-ZNOJ52bwkaITA98ta51mnxPY/user-lGnbjlc7o2MKy3tKztNgR2Qc/img-vIJm3RQInWWKL7ORFxg5bG6J.png?st=2025-02-18T09%3A16%3A44Z&amp;se=2025-02-18T11%3A16%3A44Z&amp;sp=r&amp;sv=2024-08-04&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=d505667d-d6c1-4a0a-bac7-5c84a87759f8&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2025-02-17T16%3A50%3A07Z&amp;ske=2025-02-18T16%3A50%3A07Z&amp;sks=b&amp;skv=2024-08-04&amp;sig=pnTLPWMhdGR1wkAfau9FSulTKSaygUCTbhhZshoaWpQ%3D
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              revised_prompt
1 Vivid hues of orange, pink, and purple fill the sky, setting an enchanting backdrop for the day's end. These colors are reflected in a serene, undulating pattern on the glossy surface of a calm lake in the foreground. In the middle distance, a range of snow-capped mountains stretches across the horizontal plane, their peaks appearing as sharp, silhouetted triangles against the dramatic skyscape. The pure white snow on the mountains contrasting with the darkening twilight sky, all bathed in the diminishing warm glow of the sunset, creates a breathtaking panorama of natural beauty.</code></pre>
</div>
</div>
<p>获取图片。</p>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 获取生成的图像 URL</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>image_url <span class="ot">=</span> <span class="fu">fromJSON</span>(content)[[<span class="st">"data"</span>]][[<span class="st">"url"</span>]]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 下载图片</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">GET</span>(image_url)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查请求是否成功</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">status_code</span>(response) <span class="sc">==</span> <span class="dv">200</span>) {</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 将图片保存到磁盘</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeBin</span>(<span class="fu">content</span>(response, <span class="st">"raw"</span>), <span class="st">"output/sunset.png"</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"图片已成功保存到 `output/sunset.png`。"</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"下载图片失败，状态码："</span>, <span class="fu">status_code</span>(response), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>图片已成功保存到 <code>output/sunset.png</code>。</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="output/sunset.png" class="img-fluid figure-img" width="896"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="识图功能不支持" class="level2" data-number="21.6">
<h2 data-number="21.6" class="anchored" data-anchor-id="识图功能不支持"><span class="header-section-number">21.6</span> 识图功能（不支持）</h2>
<p>使用多模态模型，可以识别图片中的信息。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置请求体</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> <span class="st">"gpt-4o-ca"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">upload_file</span>(<span class="st">"output/sunset.png"</span>),  <span class="co"># 文件路径</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">prompt =</span> <span class="st">"这是什么?"</span>,  <span class="co"># 提示</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">encode =</span> <span class="st">"multipart"</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/chat/completions"</span>, </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">body =</span> body, </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers))</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(res, <span class="st">'text'</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>) <span class="sc">|&gt;</span> <span class="fu">fromJSON</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$error
$error$message
[1] "JSON parse error: Unexpected character ('-' (code 45)) in numeric value: expected digit (0-9) to follow minus sign, for valid numeric value; nested exception is com.fasterxml.jackson.core.JsonParseException: Unexpected character ('-' (code 45)) in numeric value: expected digit (0-9) to follow minus sign, for valid numeric value\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 1, column: 3]"

$error$type
[1] "chatanywhere_error"

$error$param
NULL

$error$code
[1] "500 INTERNAL_SERVER_ERROR"</code></pre>
</div>
</div>
</section>
<section id="文字转语音模型" class="level2" data-number="21.7">
<h2 data-number="21.7" class="anchored" data-anchor-id="文字转语音模型"><span class="header-section-number">21.7</span> 文字转语音模型</h2>
<p>将一段文字转变为语音，支持中英文混合。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="st">'{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="st">   "model": "tts-1",</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="st">   "input": "今天天气不错。It is a nice day today.",</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="st">   "voice": "alloy"</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span>;</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/audio/speech"</span>, </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">body =</span> body, </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers))</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查请求是否成功</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">status_code</span>(res) <span class="sc">==</span> <span class="dv">200</span>) {</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 将响应保存为音频文件（假设返回的是二进制音频数据）</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  audio_file <span class="ot">&lt;-</span> <span class="st">"output/audio-goodday.mp3"</span>  <span class="co"># 你可以更改文件名和扩展名</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeBin</span>(<span class="fu">content</span>(res, <span class="st">"raw"</span>), audio_file)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"Audio saved successfully as: "</span>, audio_file)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">"Request failed with status: "</span>, <span class="fu">status_code</span>(res))</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<audio controls="">
<source src="output/audio-goodday.mp3" type="audio/mpeg">
</audio>
</section>
<section id="语音识别模型" class="level2" data-number="21.8">
<h2 data-number="21.8" class="anchored" data-anchor-id="语音识别模型"><span class="header-section-number">21.8</span> 语音识别模型</h2>
<p><code>whisper-1</code> 是 OpenAI 开发的一个强大的语音识别模型。它主要用于将语音转换为文本（也称为语音转文字，Speech-to-Text，简称 STT）。该模型能够处理多种语言的语音输入，并能够识别不同的口音和语音风格，非常适用于各种音频转录任务。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>headers_multipart <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>   <span class="st">'Authorization'</span> <span class="ot">=</span> <span class="fu">glue</span>(<span class="st">'Bearer {OPENAI_API_KEY}'</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">'User-Agent'</span> <span class="ot">=</span> <span class="st">'Apifox/1.0.0 (https://apifox.com)'</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>   <span class="st">'Content-Type'</span> <span class="ot">=</span> <span class="st">'multipart/form-data'</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>   <span class="st">'file'</span> <span class="ot">=</span> <span class="fu">upload_file</span>(<span class="st">'output/audio-goodday.mp3'</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>   <span class="st">'model'</span> <span class="ot">=</span> <span class="st">'whisper-1'</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>   <span class="st">'prompt'</span> <span class="ot">=</span> <span class="st">'eiusmod nulla'</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>   <span class="st">'response_format'</span> <span class="ot">=</span> <span class="st">'json'</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>   <span class="st">'temperature'</span> <span class="ot">=</span> <span class="st">'0'</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>   <span class="st">'language'</span> <span class="ot">=</span> <span class="st">''</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/audio/transcriptions"</span>, </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">body =</span> body, </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers_multipart),</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">encode =</span> <span class="st">'multipart'</span>)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">content</span>(res, <span class="st">'text'</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{"text":"今天天氣不錯 It is a nice day today"}</code></pre>
</div>
</div>
</section>
<section id="claude-模型" class="level2" data-number="21.9">
<h2 data-number="21.9" class="anchored" data-anchor-id="claude-模型"><span class="header-section-number">21.9</span> Claude 模型</h2>
<p>ChatAnywhere 提供了一个 <code>claude-3-5-sonnet-20240620</code> 模型。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="st">'{</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="st">   "model": "claude-3-5-sonnet-20240620",</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="st">   "messages": [</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="st">      {</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="st">         "role": "system",</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="st">         "content": "You are a helpful assistant."</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="st">      },</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="st">      {</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="st">         "role": "user",</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="st">         "content": "Temperature这个单词中含有几个字母e？"</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="st">      }</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="st">   ],</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="st">   "temperature": 2</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span>;</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/chat/completions"</span>, </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">body =</span> body, </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers))</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(res, <span class="st">'text'</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>() <span class="sc">|&gt;</span> </span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 7
 $ id                : chr "chatcmpl-89DL5Y5ZpqhtEco6nQIrwEDEeLCWq"
 $ choices           :'data.frame': 1 obs. of  4 variables:
  ..$ index        : int 0
  ..$ message      :'data.frame':   1 obs. of  2 variables:
  .. ..$ role   : chr "assistant"
  .. ..$ content: chr " 在\"Temperature\"这个单词中有3个字母\"e\"。"
  ..$ logprobs     : logi NA
  ..$ finish_reason: chr "stop"
 $ created           : int 1739873840
 $ model             : chr "claude-3-5-sonnet-20240620"
 $ object            : chr "chat.completion"
 $ usage             :List of 5
  ..$ prompt_tokens            : int 30
  ..$ completion_tokens        : int 20
  ..$ total_tokens             : int 50
  ..$ completion_tokens_details: Named list()
  ..$ prompt_tokens_details    : Named list()
 $ system_fingerprint: NULL</code></pre>
</div>
</div>
</section>
<section id="语音翻译模型" class="level2" data-number="21.10">
<h2 data-number="21.10" class="anchored" data-anchor-id="语音翻译模型"><span class="header-section-number">21.10</span> 语音翻译模型</h2>
<p>将音频翻译成文字（从例子可以看出该模型支持中英文混合音频）。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>body <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>   <span class="st">'file'</span> <span class="ot">=</span> <span class="fu">upload_file</span>(<span class="st">'output/audio-goodday.mp3'</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">'model'</span> <span class="ot">=</span> <span class="st">'whisper-1'</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>   <span class="st">'prompt'</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">'response_format'</span> <span class="ot">=</span> <span class="st">'json'</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>   <span class="st">'temperature'</span> <span class="ot">=</span> <span class="st">'0'</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">VERB</span>(<span class="st">"POST"</span>, </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">url =</span> <span class="st">"https://api.chatanywhere.tech/v1/audio/translations"</span>, </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">body =</span> body, </span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">add_headers</span>(headers_multipart), </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">encode =</span> <span class="st">'multipart'</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">content</span>(res, <span class="st">'text'</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{"text":"今天天气不错。It is a nice day today."}</code></pre>
</div>
</div>
</section>
<section id="总结" class="level2" data-number="21.11">
<h2 data-number="21.11" class="anchored" data-anchor-id="总结"><span class="header-section-number">21.11</span> 总结</h2>
<p>因为特殊原因，在国内不能直接访问到包括 OpenAI、Claude 等在内的大模型服务。</p>
<p>ChatAnyWhere 提供了一个替代方案，可以让你在国内访问这些大模型服务。</p>
</section>
<section id="参考文献" class="level2" data-number="21.12">
<h2 data-number="21.12" class="anchored" data-anchor-id="参考文献"><span class="header-section-number">21.12</span> 参考文献</h2>
<ul>
<li><a href="https://chatanywhere.apifox.cn/">ChatAnyWhere API 文档</a></li>
</ul>


</section>

</main> <!-- /main -->
<script src="https://giscus.app/client.js" data-repo="D2RS-2025spring/data-driven-reproducible-study" data-repo-id="R_kgDONqlH8A" data-category="General" data-category-id="DIC_kwDONqlH8M4CnKvW" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async="">
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./huggingface.html" class="pagination-link" aria-label="Hugging Face">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Hugging Face</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./deepseek.html" class="pagination-link" aria-label="DeepSeek R1 模型">
        <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">DeepSeek R1 模型</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study/edit/main/chatanywhere.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study/blob/main/chatanywhere.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/D2RS-2025spring/data-driven-reproducible-study/issues/" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script async="" src="https://hypothes.is/embed.js"></script>




</body></html>